(this.webpackJsonpstorymaker=this.webpackJsonpstorymaker||[]).push([[0],{14:function(t,e,n){},15:function(t,e,n){},18:function(t,e,n){"use strict";n.r(e);var o,a=n(0),c=n.n(a),s=n(8),i=n.n(s),r=(n(14),n(15),n(2)),h=n(1),d=function(t){return Object(h.jsx)("p",{children:t.text})},l=n(3);!function(t){t[t.DESTROY_THE_BUSINESS=0]="DESTROY_THE_BUSINESS",t[t.SAVE_THE_BUSINESS=1]="SAVE_THE_BUSINESS",t[t.ENTER_THE_CONTEST=2]="ENTER_THE_CONTEST"}(o||(o={}));var u=function(t){return t.replace(/^\w/,(function(t){return t.toUpperCase()}))},p=function(t){var e="".concat(t.leadA.name," accidentally kicks ").concat(t.leadB.name,"'s dog");return t.plot===o.SAVE_THE_BUSINESS?{inciting_incident:"to save the local ".concat(t.shop),meet_cute:e}:t.plot===o.DESTROY_THE_BUSINESS?{inciting_incident:"to demolish the local ".concat(t.shop),meet_cute:e}:{inciting_incident:"to enter the ".concat(t.shop,"'s annual ").concat(t.contest),meet_cute:e}},m=function(t){var e="gives out presents to blind children";return t.plot===o.SAVE_THE_BUSINESS?{second_interaction:["Because ".concat(t.leadA.pronoun1," heard the ").concat(t.shop," was going out of business,"),"and wanted to see if ".concat(t.leadA.pronoun1," could help save it,"),"because ".concat(t.leadA.pronoun1," always used to love it as a child")],heart_warmer:e,start_drive:["".concat(t.leadA.name," returns to ").concat(t.city,","),"to speak to ".concat(t.leadA.pronoun3," boss at the ").concat(t.leadA.industry," firm.")],continue_drive:["Initially ".concat(t.leadA.name," manages to convince the boss of the charms of ").concat(t.town," and it's ").concat(t.shop,"."),"But they refuse to give the money needed to save it"],low_point:["".concat(t.leadA.name," quits on the spot, and returns to ").concat(t.town," empty handed.")]}:t.plot===o.DESTROY_THE_BUSINESS?{second_interaction:["Because ".concat(t.leadA.pronoun3," ").concat(t.leadA.industry," company is considering buying out the ").concat(t.shop," when it goes under,"),"and turn it into luxury housing,","and ".concat(t.leadA.pronoun1," is here to see if it's a good investment.")],heart_warmer:e,start_drive:["".concat(t.leadA.name," returns to ").concat(t.city,","),"to speak to ".concat(t.leadA.pronoun3," boss at the ").concat(t.leadA.industry," firm.")],continue_drive:["".concat(t.leadA.name," tries to convince the boss that buying the ").concat(t.town," ").concat(t.shop," would be a bad investment."),"The boss disagrees, and says they will demolish the ".concat(t.shop," next week")],low_point:["".concat(t.leadA.name," quits on the spot, and returns to ").concat(t.town," empty handed.")]}:{second_interaction:["".concat(u(t.leadA.pronoun1)," wants to enter the ").concat(t.shop,"'s ").concat(t.contest,","),"because it reminds ".concat(t.leadA.pronoun2," of ").concat(t.leadA.pronoun3," childhood."),"".concat(t.leadB.name," explains that there won't be a ").concat(t.contest,", because the ").concat(t.shop," can't afford to put it on,"),"and anyway, people just don't care about Christmas like they used to."],heart_warmer:e,start_drive:["".concat(t.leadA.name," convinces ").concat(t.leadB.name," they can raise the funds they need,"),"by having a special Christmas-themed sale at the ".concat(t.shop,","),"which will raise enough to save the business and hold the ".concat(t.contest," once again.")],continue_drive:["The people of ".concat(t.town," come together to raise the money,"),"united by the spirit of Christmas, everyone is preparing for the ".concat(t.contest,".")],low_point:["But the local cop shuts it down for not having the right permits"]}},f=function(t){return t.plot===o.SAVE_THE_BUSINESS?{setup:"Put on a talent show to save the ".concat(t.shop,","),final_push:["Everyone from ".concat(t.town," attends the magical night,"),"where the townspeople show off their quirky talents.","Even the local cop, who plays the piano.","At the end of the night, ".concat(t.leadB.name," and ").concat(t.leadA.name," have saved enough money to keep the ").concat(t.shop," in business.")]}:t.plot===o.DESTROY_THE_BUSINESS?{setup:"protect the ".concat(t.shop,","),final_push:["As the bulldozers arrive,","".concat(t.leadB.name,", ").concat(t.leadA.name," and the people of ").concat(t.town," sing Christmas carols outside the ").concat(t.shop,","),"Even the local cop.","".concat(t.leadA.name,"'s boss from the ").concat(t.leadA.industry," company jumps down from one of the bulldozers smoking a cigar."),"Overwhelmed by the spirit of Christmas in the town,","the demolition is called off,","and they agree to give ".concat(t.leadB.name," and ").concat(t.leadA.name," the money they need to keep the ").concat(t.shop," in business.")]}:{setup:"hold the ".concat(t.contest," anyway,"),final_push:["The ".concat(t.contest," goes ahead, and everyone in ").concat(t.town," attends"),"Just as they are getting started, the police show up to call it off.","However, when they see the Christmas spirit of the whole town,","they decide to let it go ahead anyway.","".concat(t.leadA.name," wins the contest,"),"but more importantly everyone has fun."]}},b=function(t){return["- Act I -","Meet ".concat(t.leadA.name,". ").concat(u(t.leadA.pronoun1),"'s a high-flyer in the ").concat(t.leadA.industry," industry in ").concat(t.city,"."),"".concat(u(t.leadA.pronoun1)," works really long hours to make the big bucks."),"This year, in early December, ".concat(t.leadA.pronoun1," needs to return to ").concat(t.leadA.pronoun3," small home-town of ").concat(t.town,","),"".concat(p(t).inciting_incident,"."),"...","".concat(t.leadB.name," never left ").concat(t.town,","),"after ".concat(t.leadB.pronoun1," inherited the ").concat(t.shop," from ").concat(t.leadB.pronoun3," parents, who tragically died in a helicopter accident."),"Christmas has always been special for ".concat(t.leadB.name,", because it reminds ").concat(t.leadB.pronoun2," of them."),"The ".concat(t.shop," is not doing well financially,"),"".concat(t.leadB.name," explains this to ").concat(t.leadB.pronoun3," only employee, ").concat(t.oldHelper,", an old friend of ").concat(t.leadB.pronoun3," parents."),"...","".concat(t.leadA.name," arrives back in ").concat(t.town," and is instantly shocked at how friendly everyone is compared to ").concat(t.city,"."),"In ".concat(t.leadA.pronoun3," first night in town, ").concat(p(t).meet_cute,","),"and they get in a big argument and call each other names.","...","- Act II -","The following morning, ".concat(t.leadA.name," arrives at the ").concat(t.shop," and ").concat(t.leadB.name," is surprised and angry."),"".concat(t.leadA.name," explains why ").concat(t.leadA.pronoun1," is here:")].concat(Object(l.a)(m(t).second_interaction),["...","That evening, despite being low on funds, ".concat(t.leadB.name," ").concat(m(t).heart_warmer," at the ").concat(t.shop,"."),"Everyone in ".concat(t.town," attends, including ").concat(t.leadA.name,", and the place is filled with Christmas spirit."),"..."],Object(l.a)(m(t).start_drive),["..."],Object(l.a)(m(t).continue_drive),["..."],Object(l.a)(m(t).low_point),["...","- Act III -","".concat(t.oldHelper," convinces ").concat(t.leadB.name," and ").concat(t.leadA.name," that they should ").concat(f(t).setup),"it's what ".concat(t.leadB.pronoun3," parents would have wanted."),"..."],Object(l.a)(f(t).final_push),["...","".concat(t.leadB.name," and ").concat(t.leadA.name," realise they are in love."),"They kiss.","- THE END -"])},y=n(7),w=n.n(y),v=n(9),j=function(t){return t[Math.floor(Math.random()*t.length)]},g=function(t){return t.filter((function(t){var e;return 1===(null===(e=t.tags)||void 0===e?void 0:e.length)&&"n"===t.tags[0]}))},_=function(){var t=Object(a.useState)(null),e=Object(r.a)(t,2),n=e[0],o=e[1],c=Object(a.useState)(""),s=Object(r.a)(c,2),i=s[0],h=s[1],d=Object(a.useState)(),l=Object(r.a)(d,2),u=l[0],p=l[1],m=Object(a.useState)(),f=Object(r.a)(m,2),b=f[0],y=f[1],_=Object(a.useState)(""),O=Object(r.a)(_,2),E=O[0],S=O[1],A=Object(a.useState)(""),B=Object(r.a)(A,2),T=B[0],k=B[1],x=Object(a.useState)(""),I=Object(r.a)(x,2),H=I[0],N=I[1],C=Object(a.useState)(""),U=Object(r.a)(C,2),D=U[0],M=U[1],R=function(){var t=Object(v.a)(w.a.mark((function t(e){var n,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){V()}),[]),Object(a.useEffect)((function(){i&&Y()}),[i]),Object(a.useEffect)((function(){u&&b&&q()}),[u,b]),Object(a.useEffect)((function(){H&&J()}),[H]),Object(a.useEffect)((function(){E&&z()}),[E]),Object(a.useEffect)((function(){T&&P()}),[T]),Object(a.useEffect)((function(){if(u&&b&&T&&E&&i&&D){var t={leadA:u,leadB:b,town:T,city:E,contest:i,oldHelper:D,shop:H,plot:Math.floor(3*Math.random())};o(t)}}),[D]);var V=function(){var t=1===j([1,2]);R("https://api.datamuse.com/words?".concat(t?"ml=christmas+food":"ml=christmas+object")).then((function(e){var n=j(g(e)).word,o=j(t?["eating","cooking"]:["making","throwing","sculpting"]);h("".concat(n," ").concat(o," contest"))}))},Y=function(){var t=1===j([1,2]);R("".concat("/storymaker","/data/").concat(t?"m":"f","-names.json")).then((function(e){R("https://api.datamuse.com/words?rel_bgb=industry&topics=work").then((function(n){var o={name:j(e.names).name,pronoun1:t?"he":"she",pronoun2:t?"him":"her",pronoun3:t?"his":"her",industry:j(n).word};p(o),R("".concat("/storymaker","/data/").concat(t?"f":"m","-names.json")).then((function(e){var n={name:j(e.names).name,pronoun1:t?"she":"he",pronoun2:t?"her":"him",pronoun3:t?"her":"his"};y(n)}))}))}))},q=function(){R("https://api.datamuse.com/words?ml=christmas+object&rc=shop").then((function(t){var e=j(g(t)).word;N("".concat(e," shop"))}))},J=function(){R("".concat("/storymaker","/data/cities.json")).then((function(t){var e=j(t.cities);S(e.city)}))},z=function(){R("".concat("/storymaker","/data/towns.json")).then((function(t){var e=j(t.towns);k(e.town)}))},P=function(){var t=0===j([0,1]);R("".concat("/storymaker","/data/").concat(t?"m":"f","-names.json")).then((function(t){M(j(t.names).name)}))};return n},O=function(){var t=Object(a.useState)([]),e=Object(r.a)(t,2),n=e[0],o=e[1],c=Object(a.useState)(0),s=Object(r.a)(c,2),i=s[0],l=s[1],u=_();return Object(a.useEffect)((function(){console.log("INIT")}),[]),Object(a.useEffect)((function(){u&&o(b(u))}),[u]),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:n.map((function(t,e){if(e<=i)return Object(h.jsx)(d,{text:t},e)}))}),Object(h.jsx)("button",{onClick:function(){l(i+1),window.scrollTo({top:document.body.clientHeight})},children:"Next"})]})},E=function(){return Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)("header",{children:Object(h.jsx)("h1",{children:"Story Maker"})}),Object(h.jsx)("main",{children:Object(h.jsx)(O,{})})]})};i.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.6ee273b1.chunk.js.map